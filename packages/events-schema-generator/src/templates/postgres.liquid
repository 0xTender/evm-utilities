model {{ contract_name }} {
    id      Int    @id @default(autoincrement())
    address String
    chainId Int
    transactionHash String

    deploymentBlock  Int
    indexedTillBlock Int

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    {% for event in events %}
    {{-event.name}}_{{contract_name}} {{event.name}}_{{contract_name-}}[]
    {% endfor %}
}   

{% for event in events %}
model {{event.name}}_{{contract_name}} {
    id      Int    @id @default(autoincrement())
    {{contract_name}} {{contract_name}} @relation(fields: [{{contract_name}}Id], references: [id])
    {{contract_name}}Id Int

    block   Int
    transactionHash String
    logIndex Int
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    data {{event.name-}}_{{contract_name}}_Event?
}

model {{event.name}}_{{contract_name}}_Event {
    id      Int    @id @default(autoincrement())
    {{event.name}}_{{contract_name}} {{event.name}}_{{contract_name}} @relation(fields: [{{event.name}}_{{contract_name}}_Id], references: [id])
    {{event.name}}_{{contract_name}}_Id Int @unique
    {% for arg in event.inputs %}
    {{-arg.name}} String
    {% endfor %}
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

{% endfor %}
